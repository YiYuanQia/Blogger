import{s as p}from"./index.9285e75a.js";import{_ as a,o as c,c as h,a as o,e as r,w as i,b as l}from"./index.a778bde6.js";const u={data(){return{id:"",oldpassword:"",newpassword:"",store:p}},methods:{confirm:function(){if(this.id.trim()==""||this.oldpassword.trim()==""){console.log("\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF0C\u8BF7\u8F93\u5165\u8D26\u53F7\u5BC6\u7801");return}fetch("https://db-api.amarea.cn/users/"+this.id).then(e=>e.json()).then(e=>{if(console.log(e),e.id===this.id&&e.password===this.oldpassword)this.confirmnext();else throw new Error("\u8D26\u53F7\u6216\u5BC6\u7801\u9519\u8BEF")}).catch(e=>alert(e))},confirmnext:function(){const e=new Headers;e.append("Content-Type","application/json"),fetch("https://db-api.amarea.cn/users/"+this.id,{method:"PATCH",headers:e,body:JSON.stringify({password:this.newpassword})}).then(s=>s.json()).then(s=>{console.log(s),localStorage.setItem("password",this.newpassword),alert("\u5BC6\u7801\u4FEE\u6539\u6210\u529F"),this.$router.push("./web")}).catch(s=>console.log(s))}}},m={class:"wrap"},w={style:{border:"2px solid #000",padding:"40px","border-radius":"8px"}},f=o("div",{class:"form-group"},[o("p",{style:{"font-size":"22px",margin:"0 auto"}},"\u4FEE\u6539\u5BC6\u7801")],-1),g={class:"form-group"},_={class:"form-group"},x={class:"form-group"},y={class:"buttonLogin"};function b(e,s,v,C,n,d){return c(),h("div",m,[o("form",w,[f,o("div",g,[o("p",null,[r(" \u7528\u6237\u540D: "),i(o("input",{style:{height:25+"px"},"onUpdate:modelValue":s[0]||(s[0]=t=>n.id=t),type:"text",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,512),[[l,n.id]])])]),o("div",_,[o("p",null,[r(" \u65E7\u5BC6\u7801: "),i(o("input",{style:{height:25+"px"},"onUpdate:modelValue":s[1]||(s[1]=t=>n.oldpassword=t),type:"text",placeholder:"\u8BF7\u8F93\u5165\u65E7\u5BC6\u7801"},null,512),[[l,n.oldpassword]])])]),o("div",x,[o("p",null,[r(" \u65B0\u5BC6\u7801: "),i(o("input",{style:{height:25+"px"},"onUpdate:modelValue":s[2]||(s[2]=t=>n.newpassword=t),type:"password",placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"},null,512),[[l,n.newpassword]])])]),o("div",y,[o("button",{class:"btn",onClick:s[3]||(s[3]=(...t)=>d.confirm&&d.confirm(...t))},"\u786E\u8BA4"),o("button",{class:"btn",onClick:s[4]||(s[4]=(...t)=>e.cancel&&e.cancel(...t))},"\u53D6\u6D88")])])])}const T=a(u,[["render",b]]);export{T as default};
